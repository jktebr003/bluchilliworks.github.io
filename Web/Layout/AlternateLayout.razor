@using Microsoft.AspNetCore.Components.Authorization
@using MudBlazor
@using Web.Shared.Components
@inject AuthenticationStateProvider AuthenticationStateProvider
@inherits LayoutComponentBase

@* Required *@
<MudThemeProvider Theme="MyCustomTheme" />
<MudPopoverProvider />

@* Needed for dialogs *@ 
<MudDialogProvider />

@* Needed for snackbars *@
<MudSnackbarProvider />

@if (DeviceService.IsMobile)
{
    <div class="mobile-app-container @GetContainerClasses()">
        <AlternateMobileBar />

        <main class="mobile-main-content">
            <div class="mobile-content">
                @Body
            </div>
        </main>

        @* @if (IsHomePage)
        {
            <ResponsiveFooter AppName="@($"POCS Safety ({_environment})")"
                              VersionText="@($"VERSION {_versionNumber}")" ShowIcons="true" />
        } *@
    </div>
}
else
{
    <!-- Modern Desktop Layout -->
    <div class="desktop-modern-container @GetContainerClasses()">
        <!-- Sidebar with Logo and Navigation -->
        <div class="desktop-sidebar">
            <!-- Sidebar Logo Section -->
            <div class="desktop-sidebar-header">
                @* <img src="img/wcg-crest-for-you-800px-blue-text.svg" alt="WCG Logo" class="desktop-sidebar-logo" /> *@
                <img src="img/bluchilliworks-logo.png" alt="BluChilliWorks Logo" class="desktop-sidebar-logo" />
                <div class="desktop-sidebar-title">
                    <h2>The Teachers Lounge</h2>
                    <span>BluChilliWorks</span>
                </div>
            </div>

            <!-- Navigation Menu -->
            <div class="desktop-sidebar-nav">
                <AlternateNavMenu />
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="desktop-main">
            <!-- Header Bar with Global Nav on Left, User Info on Right -->
            <div class="desktop-header">
                <div class="desktop-header-content">
                    <!-- Left side - Global Navigation -->
                    <div class="desktop-header-nav">
                        <div class="desktop-nav-items">
                            <MudButton Color="Color.Inherit"
                                       StartIcon="@Icons.Material.Filled.Home"
                                       Href="/"
                                       Class="desktop-nav-button">
                                Home
                            </MudButton>
                        </div>
                    </div>

                    <AuthorizeView>
                        <!-- Right side - User Info and Login/Logout -->
                        <Authorized>
                            <div class="desktop-header-user">
                                <div class="desktop-user-info">
                                    <MudIcon Icon="@Icons.Material.Filled.Person"
                                             Class="desktop-user-icon" />
                                    <MudText Class="desktop-user-name">@context.User.Identity.Name</MudText>
                                    <MudButton Color="Color.Inherit"
                                               StartIcon="@Icons.Material.Filled.Logout"
                                               OnClick="() => LogoutAsync()"
                                               Class="desktop-auth-button">
                                        Logout
                                    </MudButton>
                                </div>
                            </div>
                        </Authorized>
                        <NotAuthorized>
                            <div class="desktop-header-user">
                                <div class="desktop-user-info">
                                    <MudIcon Icon="@Icons.Material.Filled.Person"
                                             Class="desktop-user-icon" />
                                    <MudText Class="desktop-user-name">Guest</MudText>
                                    <MudButton Color="Color.Inherit"
                                               StartIcon="@Icons.Material.Filled.Login"
                                               Href="/authentication/login"
                                               Class="desktop-auth-button">
                                        Login
                                    </MudButton>
                                </div>
                            </div>
                        </NotAuthorized>
                    </AuthorizeView>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="desktop-content">
                <div class="desktop-content-wrapper">
                    @* @if (IsHomePage)
                    {
                        <!-- Desktop Home Page Layout -->
                        <div class="desktop-welcome-section">
                            <h1 class="desktop-welcome-title">Welcome to The Teachers Lounge</h1>
                            <p class="desktop-welcome-subtitle">“Teachers are the only professionals who have to respond to bells every forty-five minutes and come out fighting.” – Frank McCourt</p>
                        </div>

                        <div class="desktop-login-section">
                            <h2 class="desktop-login-title">Get Started</h2>
                            <p class="desktop-login-description">Log in to access all features and start .......... </p>
                            <MudButton Variant="Variant.Filled"
                                       Color="Color.Primary"
                                       StartIcon="@Icons.Material.Filled.Login"
                                       Href="/authentication/login"
                                       Class="desktop-login-button">
                                Sign In
                            </MudButton>
                        </div>

                        <div class="desktop-section">
                            <h2 class="desktop-section-title">Who We Are</h2>
                            <p class="desktop-section-description">
                                Having been involved in the education sector for more than a decade, we've discovered the real reason why teaching is seen by many as the "Noblest profession".
                            </p>
                            <br />
                            <p class="desktop-section-description">
                                In the South African context, as we are sure it is echoed in many parts of the globe, educators in general offer a huge part of their lives nurturing, preparing and fixing the academic abilities, psyche and drive for the younger generations to make successes of their post education lives. This usually comes at the price of sacrificing your family time, personal time and especially personal and professional growth, with little reward (in most instances) besides the pride and joy of being able to see their young charges entering the adult world prepared for life.
                            </p>
                            <br />
                            <p class="desktop-section-description">
                                This platform, and the people behind it, recognises the sacrifices made by educators, which clearly corroborates the ""Noblest Profession"" notion, and would like to be part of a system that rewards you for the hours, challenges, tears and fears which you experience on a daily basis. A system that brings the world to your reach.
                            </p>
                            <br />
                            <p class="desktop-section-description">
                                Helping you to do the things cannot do or dreams that are lost due to not enough hours in the day.<br />
                                Helping you to reach goals professionally as well as in your personal capacity.<br />
                                WIth the full back up and support of a network of peers globally, industry professionals in the education sector as well as most other industries.
                            </p>
                        </div>

                        <div class="desktop-section">
                            <h2 class="desktop-section-title">Our History</h2>
                            <p class="desktop-section-description">
                                Our company was founded in 2005 with the aim of providing high-quality products and services to our customers. Since then, we have grown to become one of the leading companies in our industry, with a reputation for excellence and innovation.

                            </p>
                            <br />
                            <p class="desktop-section-description">
                                Over the years, we have expanded our product line to include a wide range of items, from basic essentials to cutting-edge technology. We are committed to staying at the forefront of our field, and we are constantly exploring new ways to improve our products and services.

                            </p>
                            <br />
                            <p class="desktop-section-description">
                                At the heart of our success is our team of dedicated professionals. We are proud to employ some of the most talented and experienced individuals in the industry, and we are committed to providing them with the support and resources they need to succeed.
                            </p>
                            <br />
                            <p class="desktop-section-description">
                                As we look to the future, we remain focused on our core values of quality, innovation, and customer satisfaction. We are excited about the opportunities that lie ahead, and we look forward to continuing to serve our customers with excellence and integrity.
                            </p>
                        </div>

                        <div class="desktop-benefits-section">
                            <h2 class="desktop-benefits-title">Key Benefits</h2>
                            <div class="desktop-benefits-grid">
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Security" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Network</h3>
                                        <p class="desktop-benefit-description">Be a part of the global educator family network.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Speed" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Wellbeing</h3>
                                        <p class="desktop-benefit-description">A portal dedicated to enrich the professional, economical, personal and physical wellbeing of our members.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.CloudSync" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Development</h3>
                                        <p class="desktop-benefit-description">Supporting and developing underprivileged schools and members with 20% of subscription revenue reinvested in our portal community.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Exposure</h3>
                                        <p class="desktop-benefit-description">Jobs portal and CV exposure for available positions locally and internationally. All schools can advertise positions on our portal at no charge.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Secure</h3>
                                        <p class="desktop-benefit-description">Secure and private room for Principals only.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Learning Support</h3>
                                        <p class="desktop-benefit-description">Accredited career and learning support at your fingertips. Accredited learning resources at your disposal.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Rewards</h3>
                                        <p class="desktop-benefit-description">Weekly reward system for high and special achievers.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Support</h3>
                                        <p class="desktop-benefit-description">Online basic support for medical, legal and financial assistance.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Affiliations</h3>
                                        <p class="desktop-benefit-description">Links to professional bodies and certifications.</p>
                                    </div>
                                </div>
                                <div class="desktop-benefit-card">
                                    <div class="desktop-benefit-icon">
                                        <MudIcon Icon="@Icons.Material.Filled.Verified" />
                                    </div>
                                    <div class="desktop-benefit-content">
                                        <h3 class="desktop-benefit-title">Finance</h3>
                                        <p class="desktop-benefit-description">Business club membership where we invest in programs and initiatives to generate additional income streams.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <!-- Regular Page Content -->
                        <article class="desktop-article">
                            @Body
                        </article>
                    } *@

                    <!-- Regular Page Content -->
                    <article class="desktop-article">
                        @Body
                    </article>
                </div>
            </div>

            <!-- Condensed Desktop Footer -->
            @* <ResponsiveFooter AppName="@($"POCS Safety ({_environment})")"
                              VersionText="@($"{_versionNumber}")"
                              ShowIcons="true" /> *@
        </main>
    </div>
}

<ProgressSpinner IsBusy="_busy" />

<UpdateAvailableDetector />

@code {
    private bool IsHomePage => Navigation.Uri.EndsWith("/") || Navigation.Uri.EndsWith("/home", StringComparison.OrdinalIgnoreCase);


}